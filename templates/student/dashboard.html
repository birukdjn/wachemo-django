{% extends "base.html" %} {% load static %} {% if not user.is_authenticated %}
{% url 'login' as login %}
<script>
  window.location.href = "{{ login }}?next={{ request.path|urlencode }}";
</script>
{% else %} {% block title %}Student Dashboard - WachemoSaPS{% endblock %} 
{% block content %}



<div class="container-fluid">
  <div class="row">
    <!-- Sidebar -->
     {% include "student/sidebar.html" %}
    <!-- Main Content -->
    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
      <!-- Dashboard Home -->
      <div id="section-dashboard" class="dashboard-section">
        <div class="row mb-4">
          <div class="col text-center">
            <h2 class="mb-3">Welcome to Your Dashboard</h2>
            <p class="lead">
              Stay updated with your courses, grades, and school news.
            </p>
          </div>
        </div>
        <div class="row mb-4">
          <div class="col-md-6">
            <div class="alert alert-info shadow-sm" role="alert">
              <i class="bi bi-info-circle me-2"></i>
              <strong>Tip:</strong> Check your assignments regularly to stay on
              top of deadlines!
            </div>
          </div>
          <div class="col-md-6">
            <div class="alert alert-success shadow-sm" role="alert">
              <i class="bi bi-calendar-event me-2"></i>
              <strong>Upcoming Event:</strong> School Science Fair on
              <span class="fw-bold">June 15</span>. Donâ€™t miss it!
            </div>
          </div>
        </div>
        <!-- Quick Stats Cards -->
        <div class="row g-4 mb-4">
          <div class="col-md-3 col-6">
            <div class="card text-bg-primary shadow-sm h-100">
              <div class="card-body text-center">
                <i class="bi bi-envelope-paper-fill fs-2 mb-2"></i>
                <h5 class="card-title mb-1">Messages</h5>
                <h3 class="fw-bold mb-0">{{ num_messages|default:"0" }}</h3>
                <small>Unread Messages</small>
              </div>
            </div>
          </div>
          <div class="col-md-3 col-6">
            <div class="card text-bg-success shadow-sm h-100">
              <div class="card-body text-center">
                <i class="bi bi-pencil-square fs-2 mb-2"></i>
                <h5 class="card-title mb-1">Assignments</h5>
                <h3 class="fw-bold mb-0">{{ num_assignments|default:"0" }}</h3>
                <small>Due Assignments</small>
              </div>
            </div>
          </div>
          <div class="col-md-3 col-6">
            <div class="card text-bg-warning shadow-sm h-100">
              <div class="card-body text-center">
                <i class="bi bi-calendar2-week-fill fs-2 mb-2"></i>
                <h5 class="card-title mb-1">Today's Classes</h5>
                <h3 class="fw-bold mb-0">
                  {{ num_classes_today|default:"0" }}
                </h3>
                <small>Scheduled Today</small>
              </div>
            </div>
          </div>
          <div class="col-md-3 col-6">
            <div class="card text-bg-info shadow-sm h-100">
              <div class="card-body text-center">
                <i class="bi bi-bar-chart-fill fs-2 mb-2"></i>
                <h5 class="card-title mb-1">Attendance</h5>
                <h3 class="fw-bold mb-0">
                  {{ attendance_percentage|default:"0" }}%
                </h3>
                <small>This Month</small>
              </div>
            </div>
          </div>
        </div>
        <!-- More Reports Section -->
        <div class="row g-4 mb-4">
          <div class="col-md-3 col-6">
            <div class="card text-bg-secondary shadow-sm h-100">
              <div class="card-body text-center">
                <i class="bi bi-book-fill fs-2 mb-2"></i>
                <h5 class="card-title mb-1">Total Courses</h5>
                <h3 class="fw-bold mb-0">{{ num_courses|default:"0" }}</h3>
                <small>Enrolled</small>
              </div>
            </div>
          </div>
          <div class="col-md-3 col-6">
            <div class="card text-bg-danger shadow-sm h-100">
              <div class="card-body text-center">
                <i class="bi bi-exclamation-triangle-fill fs-2 mb-2"></i>
                <h5 class="card-title mb-1">Late Assignments</h5>
                <h3 class="fw-bold mb-0">
                  {{ num_late_assignments|default:"0" }}
                </h3>
                <small>Past Due</small>
              </div>
            </div>
          </div>
          <div class="col-md-3 col-6">
            <div class="card text-bg-light shadow-sm h-100">
              <div class="card-body text-center">
                <i class="bi bi-star-fill fs-2 mb-2 text-warning"></i>
                <h5 class="card-title mb-1">Average Grade</h5>
                <h3 class="fw-bold mb-0">{{ average_grade|default:"N/A" }}</h3>
                <small>This Semester</small>
              </div>
            </div>
          </div>
          <div class="col-md-3 col-6">
            <div class="card text-bg-dark shadow-sm h-100">
              <div class="card-body text-center">
                <i class="bi bi-trophy-fill fs-2 mb-2"></i>
                <h5 class="card-title mb-1">Achievements</h5>
                <h3 class="fw-bold mb-0">{{ num_achievements|default:"0" }}</h3>
                <small>Earned</small>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- My Courses -->
      <div id="section-courses" class="dashboard-section d-none">
        <h3>My Courses</h3>
        <p>View and manage your enrolled courses.</p>
        {% if course %}
        <div class="table-responsive">
          <table class="table table-striped align-middle">
            <thead class="table-light">
              <tr>
                <th scope="col">Course Code</th>
                <th scope="col">Course Name</th>
                <th scope="col">Instructor</th>
                <th scope="col">Credits</th>
                <th scope="col">Status</th>
                <th scope="col">Actions</th>
              </tr>
            </thead>
            <tbody>
              {% for course in course %}
              <tr>
                <td>{{ course.code }}</td>
                <td>{{ course.name }}</td>
                <td>
                  {{ course.instructor.get_full_name|default:course.instructor
                  }}
                </td>
                <td>{{ course.credits|default:"-" }}</td>
                <td>
                  {% if course.is_active %}
                  <span class="badge bg-success">Active</span>
                  {% else %}
                  <span class="badge bg-secondary">Inactive</span>
                  {% endif %}
                </td>
                <td>
                  <a
                    href="{% url 'course_detail' course.id %}"
                    class="btn btn-sm btn-primary"
                    data-section="courses"
                  >
                    <i class="bi bi-eye"></i> View
                  </a>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        {% else %}
        <div class="alert alert-warning mt-3" role="alert">
          <i class="bi bi-exclamation-circle me-2"></i>
          You are not enrolled in any courses yet.
        </div>
        {% endif %}
      </div>
      <!-- My Grades -->
      <div id="section-grades" class="dashboard-section d-none">
        <h3>My Grades</h3>
        <p>Check your latest grades and performance.</p>
        <!-- Add your grades content here -->
      </div>
      <!-- Attendance Section -->
<div id="section-attendance" class="dashboard-section d-none">
    <div class="row mb-4">
        <div class="col">
            <h3 class="mb-3">Attendance Records</h3>
            <p class="lead">View your attendance history and statistics</p>
            <div class="divider"></div>
        </div>
    </div>

    <!-- Attendance Summary Cards -->
    <div class="row g-4 mb-4">
        <div class="col-md-3 col-6">
            <div class="card text-bg-success shadow-sm h-100">
                <div class="card-body text-center">
                    <i class="bi bi-check-circle fs-2 mb-2"></i>
                    <h5 class="card-title mb-1">Present</h5>
                    <h3 class="fw-bold mb-0">87%</h3>
                    <small>This Semester</small>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-6">
            <div class="card text-bg-danger shadow-sm h-100">
                <div class="card-body text-center">
                    <i class="bi bi-x-circle fs-2 mb-2"></i>
                    <h5 class="card-title mb-1">Absent</h5>
                    <h3 class="fw-bold mb-0">8%</h3>
                    <small>This Semester</small>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-6">
            <div class="card text-bg-warning shadow-sm h-100">
                <div class="card-body text-center">
                    <i class="bi bi-clock-history fs-2 mb-2"></i>
                    <h5 class="card-title mb-1">Late</h5>
                    <h3 class="fw-bold mb-0">5%</h3>
                    <small>This Semester</small>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-6">
            <div class="card text-bg-info shadow-sm h-100">
                <div class="card-body text-center">
                    <i class="bi bi-calendar-check fs-2 mb-2"></i>
                    <h5 class="card-title mb-1">Total Days</h5>
                    <h3 class="fw-bold mb-0">64</h3>
                    <small>This Semester</small>
                </div>
            </div>
        </div>
    </div>

    <!-- Attendance Filter Options -->
    <div class="row mb-4">
        <div class="col">
            <div class="card shadow-sm">
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-3">
                            <label for="attendanceMonth" class="form-label">Month</label>
                            <select class="form-select" id="attendanceMonth">
                                <option value="">All Months</option>
                                <option value="1">January</option>
                                <option value="2">February</option>
                                <option value="3">March</option>
                                <option value="4">April</option>
                                <option value="5">May</option>
                                <option value="6" selected>June</option>
                                <option value="7">July</option>
                                <option value="8">August</option>
                                <option value="9">September</option>
                                <option value="10">October</option>
                                <option value="11">November</option>
                                <option value="12">December</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label for="attendanceSubject" class="form-label">Subject</label>
                            <select class="form-select" id="attendanceSubject">
                                <option value="">All Subjects</option>
                                <option value="math">Mathematics</option>
                                <option value="science">Science</option>
                                <option value="english">English</option>
                                <option value="history">History</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label for="attendanceStatus" class="form-label">Status</label>
                            <select class="form-select" id="attendanceStatus">
                                <option value="">All Statuses</option>
                                <option value="present">Present</option>
                                <option value="absent">Absent</option>
                                <option value="late">Late</option>
                                <option value="excused">Excused</option>
                            </select>
                        </div>
                        <div class="col-md-3 d-flex align-items-end">
                            <button class="btn btn-primary w-100" id="applyFilters">
                                <i class="bi bi-funnel me-2"></i>Apply Filters
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Attendance Calendar View -->
    <div class="row mb-4">
        <div class="col">
            <div class="card shadow-sm">
                <div class="card-header bg-light d-flex justify-content-between align-items-center">
                    <h5 class="mb-0"><i class="bi bi-calendar3 me-2"></i>Monthly Overview</h5>
                    <div>
                        <button class="btn btn-sm btn-outline-primary" id="prevMonthAtt">
                            <i class="bi bi-chevron-left"></i>
                        </button>
                        <button class="btn btn-sm btn-outline-primary" id="nextMonthAtt">
                            <i class="bi bi-chevron-right"></i>
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-bordered attendance-calendar">
                            <thead>
                                <tr>
                                    <th class="text-center">Sun</th>
                                    <th class="text-center">Mon</th>
                                    <th class="text-center">Tue</th>
                                    <th class="text-center">Wed</th>
                                    <th class="text-center">Thu</th>
                                    <th class="text-center">Fri</th>
                                    <th class="text-center">Sat</th>
                                </tr>
                            </thead>
                            <tbody id="attendance-calendar-body">
                                <!-- Attendance calendar will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-3">
                        <div class="d-flex flex-wrap gap-3">
                            <div class="d-flex align-items-center">
                                <div class="attendance-legend present me-2"></div>
                                <small>Present</small>
                            </div>
                            <div class="d-flex align-items-center">
                                <div class="attendance-legend absent me-2"></div>
                                <small>Absent</small>
                            </div>
                            <div class="d-flex align-items-center">
                                <div class="attendance-legend late me-2"></div>
                                <small>Late</small>
                            </div>
                            <div class="d-flex align-items-center">
                                <div class="attendance-legend excused me-2"></div>
                                <small>Excused</small>
                            </div>
                            <div class="d-flex align-items-center">
                                <div class="attendance-legend holiday me-2"></div>
                                <small>Holiday</small>
                            </div>
                            <div class="d-flex align-items-center">
                                <div class="attendance-legend weekend me-2"></div>
                                <small>Weekend</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Detailed Attendance Records -->
    <div class="row">
        <div class="col">
            <div class="card shadow-sm">
                <div class="card-header bg-light">
                    <h5 class="mb-0"><i class="bi bi-list-check me-2"></i>Detailed Records</h5>
                </div>
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-hover align-middle mb-0">
                            <thead class="table-light">
                                <tr>
                                    <th>Date</th>
                                    <th>Day</th>
                                    <th>Subject</th>
                                    <th>Status</th>
                                    <th>Time</th>
                                    <th>Remarks</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>2025-06-15</td>
                                    <td>Monday</td>
                                    <td>Mathematics</td>
                                    <td><span class="badge bg-success">Present</span></td>
                                    <td>08:15 AM</td>
                                    <td>-</td>
                                </tr>
                                <tr>
                                    <td>2025-06-16</td>
                                    <td>Tuesday</td>
                                    <td>Science</td>
                                    <td><span class="badge bg-danger">Absent</span></td>
                                    <td>-</td>
                                    <td>Medical Leave</td>
                                </tr>
                                <tr>
                                    <td>2025-06-17</td>
                                    <td>Wednesday</td>
                                    <td>English</td>
                                    <td><span class="badge bg-warning">Late</span></td>
                                    <td>09:05 AM</td>
                                    <td>Traffic delay</td>
                                </tr>
                                <tr>
                                    <td>2025-06-18</td>
                                    <td>Thursday</td>
                                    <td>History</td>
                                    <td><span class="badge bg-success">Present</span></td>
                                    <td>08:10 AM</td>
                                    <td>-</td>
                                </tr>
                                <tr>
                                    <td>2025-06-19</td>
                                    <td>Friday</td>
                                    <td>Mathematics</td>
                                    <td><span class="badge bg-info">Excused</span></td>
                                    <td>-</td>
                                    <td>Family event</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="card-footer bg-light">
                    <nav aria-label="Attendance pagination">
                        <ul class="pagination justify-content-center mb-0">
                            <li class="page-item disabled">
                                <a class="page-link" href="#" tabindex="-1">Previous</a>
                            </li>
                            <li class="page-item active"><a class="page-link" href="#">1</a></li>
                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item">
                                <a class="page-link" href="#">Next</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>


      <!-- Assignments -->
      <div id="section-assignments" class="dashboard-section d-none">
        <h3>Assignments</h3>
        <p>See upcoming and submitted assignments.</p>
        <!-- Add your assignments content here -->
      </div>
      <!-- Profile -->
      <div id="section-profile" class="dashboard-section d-none">
        <h3>Profile</h3>
        <p>Update your personal information and settings.</p>
        <!-- Add your profile content here -->
      </div>
      <!-- Timetable -->
      <div id="section-timetable" class="dashboard-section d-none">
        <h3>Timetable</h3>
        <p>View your daily and weekly class schedule.</p>
        <!-- Add your timetable content here -->
      </div>
      <!-- Messages -->
      <div id="section-messages" class="dashboard-section d-none">
        <h3>Messages</h3>
        <p>Check messages from teachers and classmates.</p>
        <!-- Add your messages content here -->
      </div>
      <!-- School News -->
      <div id="section-news" class="dashboard-section d-none">
        <h3>School News</h3>
        <p>Read the latest announcements and updates.</p>
        <!-- Add your news content here -->
      </div>
      <!-- Library -->
      <div id="section-library" class="dashboard-section d-none">
        <h3>Library</h3>
        <p>Access digital resources and library catalog.</p>
        <!-- Add your library content here -->
      </div>
      <!-- Clubs & Activities -->
      <div id="section-clubs" class="dashboard-section d-none">
        <h3>Clubs & Activities</h3>
        <p>Join and participate in school clubs and activities.</p>
        <!-- Add your clubs content here -->
      </div>
      <!-- Events Calendar Section -->
      <div id="section-events" class="dashboard-section d-none">
        <div class="row mb-4">
          <div class="col">
            <h3 class="mb-3">Events Calendar</h3>
            <p class="lead">View upcoming school events and important dates</p>
            <div class="divider"></div>
          </div>
        </div>

        <div class="row">
          <!-- Calendar View -->
          <div class="col-lg-8 mb-4">
            <div class="card shadow-sm h-100">
              <div
                class="card-header bg-light d-flex justify-content-between align-items-center"
              >
                <h5 class="mb-0">
                  <i class="bi bi-calendar-date me-2"></i>School Calendar
                </h5>
                <div>
                  <button class="btn btn-sm btn-outline-primary" id="prevMonth">
                    <i class="bi bi-chevron-left"></i>
                  </button>
                  <button class="btn btn-sm btn-outline-primary" id="nextMonth">
                    <i class="bi bi-chevron-right"></i>
                  </button>
                </div>
              </div>
              <div class="card-body">
                <!-- Calendar Display -->
                <div id="calendar-header" class="text-center mb-3">
                  <h4 id="current-month">June 2025</h4>
                </div>
                <div class="table-responsive">
                  <table class="table table-bordered calendar-table">
                    <thead>
                      <tr>
                        <th class="text-center">Sun</th>
                        <th class="text-center">Mon</th>
                        <th class="text-center">Tue</th>
                        <th class="text-center">Wed</th>
                        <th class="text-center">Thu</th>
                        <th class="text-center">Fri</th>
                        <th class="text-center">Sat</th>
                      </tr>
                    </thead>
                    <tbody id="calendar-body">
                      <!-- Calendar days will be populated by JavaScript -->
                    </tbody>
                  </table>
                </div>

                <!-- Month Navigation Bar -->
                <div class="mt-4">
                  <div
                    class="d-flex justify-content-center align-items-center gap-2"
                  >
                    <button
                      type="button"
                      class="btn btn-sm btn-outline-secondary px-2 py-1"
                      id="prevMonthBtn"
                    >
                      <i class="bi bi-chevron-left"></i>
                    </button>
                    <div
                      class="month-scroller d-flex overflow-hidden"
                      style="width: 500px"
                    >
                      <div class="d-flex month-selector-container">
                        {% for month in months %}
                        <button
                          type="button"
                          class="btn btn-md mx-1 {% if month.is_current %}btn-primary{% else %}btn-outline-primary{% endif %} px-3 month-selector"
                          data-month="{{ month.index }}"
                        >
                          {{ month.name }}
                        </button>
                        {% endfor %}
                      </div>
                    </div>
                    <button
                      type="button"
                      class="btn btn-sm btn-outline-secondary px-2 py-1"
                      id="nextMonthBtn"
                    >
                      <i class="bi bi-chevron-right"></i>
                    </button>
                  </div>
                </div>
              </div>

              <!-- Other Event Resources -->
              <div class="card-footer bg-light">
                <div class="d-flex flex-wrap gap-3 align-items-center">
                  <div>
                    <i class="bi bi-link-45deg me-1 text-secondary"></i>
                    <a
                      href="https://calendar.google.com/"
                      target="_blank"
                      class="text-decoration-none"
                      >Google Calendar</a
                    >
                  </div>
                  <div>
                    <i class="bi bi-file-earmark-text me-1 text-secondary"></i>
                    <a href="#" class="text-decoration-none"
                      >Event Guidelines (PDF)</a
                    >
                  </div>
                  <div>
                    <i class="bi bi-people-fill me-1 text-secondary"></i>
                    <a href="#" class="text-decoration-none"
                      >Event Organizers</a
                    >
                  </div>
                  <div>
                    <i class="bi bi-question-circle me-1 text-secondary"></i>
                    <a
                      href="#section-support"
                      class="text-decoration-none"
                      data-section="support"
                      >Need Help?</a
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Upcoming Events List -->
          <div class="col-lg-4 mb-4">
            <div class="card shadow-sm h-100">
              <div class="card-header bg-light">
                <h5 class="mb-0">
                  <i class="bi bi-list-ul me-2"></i>Upcoming Events
                </h5>
              </div>
              <div class="card-body p-0">
                <div class="list-group list-group-flush">
                  <div class="list-group-item">
                    <div class="d-flex w-100 justify-content-between">
                      <h6 class="mb-1 text-primary">Science Fair</h6>
                      <small class="text-muted">Jun 15</small>
                    </div>
                    <p class="mb-1">Annual school science fair competition</p>
                    <small class="text-muted">Main Auditorium, 9:00 AM</small>
                  </div>
                  <div class="list-group-item">
                    <div class="d-flex w-100 justify-content-between">
                      <h6 class="mb-1 text-success">Sports Day</h6>
                      <small class="text-muted">Jun 22</small>
                    </div>
                    <p class="mb-1">Inter-house sports competition</p>
                    <small class="text-muted">School Field, All Day</small>
                  </div>
                  <div class="list-group-item">
                    <div class="d-flex w-100 justify-content-between">
                      <h6 class="mb-1 text-danger">Mid-Term Exams</h6>
                      <small class="text-muted">Jun 26-30</small>
                    </div>
                    <p class="mb-1">First semester mid-term examinations</p>
                    <small class="text-muted">All Classes</small>
                  </div>
                  <div class="list-group-item">
                    <div class="d-flex w-100 justify-content-between">
                      <h6 class="mb-1 text-warning">Parent-Teacher Meeting</h6>
                      <small class="text-muted">Jul 5</small>
                    </div>
                    <p class="mb-1">Discuss student progress with teachers</p>
                    <small class="text-muted"
                      >Classrooms, 2:00 PM - 5:00 PM</small
                    >
                  </div>
                  <div class="list-group-item">
                    <div class="d-flex w-100 justify-content-between">
                      <h6 class="mb-1 text-info">Cultural Day</h6>
                      <small class="text-muted">Jul 12</small>
                    </div>
                    <p class="mb-1">Celebration of cultural diversity</p>
                    <small class="text-muted">School Grounds, 10:00 AM</small>
                  </div>
                </div>
              </div>
              <div class="card-footer bg-light">
                <a href="#" class="btn btn-sm btn-outline-primary w-100"
                  >View All Events</a
                >
              </div>
            </div>
          </div>
        </div>

        <!-- Event Categories -->
        <div class="row mb-4">
          <div class="col">
            <div class="card shadow-sm">
              <div class="card-header bg-light">
                <h5 class="mb-0">
                  <i class="bi bi-tags me-2"></i>Event Categories
                </h5>
              </div>
              <div class="card-body">
                <div class="d-flex flex-wrap gap-2">
                  <span class="badge bg-primary">Academic</span>
                  <span class="badge bg-success">Sports</span>
                  <span class="badge bg-danger">Examinations</span>
                  <span class="badge bg-warning">Meetings</span>
                  <span class="badge bg-info">Cultural</span>
                  <span class="badge bg-secondary">Holidays</span>
                  <span class="badge bg-dark">Other</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Event Details Modal -->
        <div
          class="modal fade"
          id="eventModal"
          tabindex="-1"
          aria-labelledby="eventModalLabel"
          aria-hidden="true"
        >
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="eventModalLabel">Event Details</h5>
                <button
                  type="button"
                  class="btn-close"
                  data-bs-dismiss="modal"
                  aria-label="Close"
                ></button>
              </div>
              <div class="modal-body">
                <h4 id="eventTitle">Science Fair</h4>
                <p>
                  <i class="bi bi-calendar-event me-2"></i
                  ><span id="eventDate">June 15, 2023</span>
                </p>
                <p>
                  <i class="bi bi-clock me-2"></i
                  ><span id="eventTime">9:00 AM - 3:00 PM</span>
                </p>
                <p>
                  <i class="bi bi-geo-alt me-2"></i
                  ><span id="eventLocation">Main Auditorium</span>
                </p>
                <div class="mb-3">
                  <span class="badge bg-primary" id="eventCategory"
                    >Academic</span
                  >
                </div>
                <p id="eventDescription">
                  The annual school science fair showcases student projects in
                  various scientific disciplines. Students from all grades
                  participate with innovative projects. Judges from local
                  universities will evaluate the projects and awards will be
                  given in different categories.
                </p>
                <div class="alert alert-info">
                  <i class="bi bi-info-circle me-2"></i>
                  <span id="eventReminder"
                    >Remember to register your project by June 10th</span
                  >
                </div>
              </div>
              <div class="modal-footer">
                <button
                  type="button"
                  class="btn btn-secondary"
                  data-bs-dismiss="modal"
                >
                  Close
                </button>
                <button type="button" class="btn btn-primary">
                  Add to My Calendar
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Support Section -->
      <div id="section-support" class="dashboard-section d-none">
        <div class="row mb-4">
          <div class="col">
            <h3 class="mb-3">Support Center</h3>
            <p class="lead">
              Get help with school services and technical issues
            </p>
            <div class="divider"></div>
          </div>
        </div>

        <div class="row">
          <!-- Quick Help Cards -->
          <div class="col-md-4 mb-4">
            <div class="card h-100 shadow-sm">
              <div class="card-body text-center">
                <div class="icon-circle bg-primary mb-3 mx-auto">
                  <i class="bi bi-question-circle-fill text-white fs-4"></i>
                </div>
                <h5 class="card-title">FAQs</h5>
                <p class="card-text">
                  Find answers to common questions about the portal and school
                  services.
                </p>
                <a href="#faqs" class="btn btn-outline-primary">View FAQs</a>
              </div>
            </div>
          </div>

          <div class="col-md-4 mb-4">
            <div class="card h-100 shadow-sm">
              <div class="card-body text-center">
                <div class="icon-circle bg-success mb-3 mx-auto">
                  <i class="bi bi-chat-left-text-fill text-white fs-4"></i>
                </div>
                <h5 class="card-title">Live Chat</h5>
                <p class="card-text">
                  Chat with our support team in real-time during school hours.
                </p>
                <button class="btn btn-outline-success" id="startChatBtn">
                  Start Chat
                </button>
              </div>
            </div>
          </div>

          <div class="col-md-4 mb-4">
            <div class="card h-100 shadow-sm">
              <div class="card-body text-center">
                <div class="icon-circle bg-info mb-3 mx-auto">
                  <i class="bi bi-telephone-fill text-white fs-4"></i>
                </div>
                <h5 class="card-title">Call Support</h5>
                <p class="card-text">
                  Speak directly with our IT help desk during working hours.
                </p>
                <a href="tel:+251908574808" class="btn btn-outline-info"
                  >Call Now</a
                >
              </div>
            </div>
          </div>
        </div>

        <!-- Support Ticket and Contact Info - Side by Side -->
        <div class="row mb-4">
          <!-- Support Ticket Form -->
          <div class="col-lg-6 mb-4 d-flex">
            <div class="card shadow-sm flex-fill">
              <div class="card-header bg-light">
                <h5 class="mb-0">
                  <i class="bi bi-ticket-detailed me-2"></i>Submit a Support
                  Ticket
                </h5>
              </div>
              <div class="card-body d-flex flex-column">
                <form id="supportTicketForm" class="flex-grow-1">
                  <div class="mb-3">
                    <label for="ticketSubject" class="form-label"
                      >Subject</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="ticketSubject"
                      placeholder="Briefly describe your issue"
                      required
                    />
                  </div>
                  <div class="mb-3">
                    <label for="ticketCategory" class="form-label"
                      >Category</label
                    >
                    <select class="form-select" id="ticketCategory" required>
                      <option value="" selected disabled>
                        Select a category
                      </option>
                      <option value="technical">Technical Issue</option>
                      <option value="academic">Academic Support</option>
                      <option value="account">Account Help</option>
                      <option value="course">Course Enrollment</option>
                      <option value="other">Other</option>
                    </select>
                  </div>
                  <div class="mb-3">
                    <label for="ticketDescription" class="form-label"
                      >Description</label
                    >
                    <textarea
                      class="form-control"
                      id="ticketDescription"
                      rows="4"
                      placeholder="Please describe your issue in detail..."
                      required
                    ></textarea>
                  </div>
                  <div class="mb-3">
                    <label for="ticketAttachment" class="form-label"
                      >Attachments (if any)</label
                    >
                    <input
                      class="form-control"
                      type="file"
                      id="ticketAttachment"
                      multiple
                    />
                    <div class="form-text">
                      You can upload screenshots or documents related to your
                      issue (max 5MB)
                    </div>
                  </div>
                  <div class="mt-auto">
                    <button type="submit" class="btn btn-primary w-100">
                      Submit Ticket
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>

          <!-- Additional Support Options -->
          <div class="col-lg-6 mb-4 d-flex">
            <div class="card shadow-sm flex-fill">
              <div class="card-header bg-light">
                <h5 class="mb-0">
                  <i class="bi bi-info-circle me-2"></i>Additional Support
                  Options
                </h5>
              </div>
              <div class="card-body d-flex flex-column">
                <div class="mb-3">
                  <h6><i class="bi bi-building me-2"></i>IT Help Desk</h6>
                  <p class="mb-1">
                    Location: Administration Building, Room 105
                  </p>
                  <p class="mb-1">Hours: Mon-Fri 8:00 AM - 5:00 PM</p>
                  <p class="mb-1">
                    Phone: <a href="tel:+251908574808">+251 908 574 808</a>
                  </p>
                  <p>Phone: <a href="tel:+251777888325">+251 777 888 325</a></p>
                </div>

                <div class="mb-3">
                  <h6><i class="bi bi-envelope me-2"></i>Email Support</h6>
                  <p class="mb-1">
                    Technical Issues:
                    <a href="mailto:it-support@wachemoschool.edu.et"
                      >it-support@wachemoschool.edu.et</a
                    >
                  </p>
                  <p class="mb-1">
                    Academic Support:
                    <a href="mailto:academic-support@wachemoschool.edu.et"
                      >academic-support@wachemoschool.edu.et</a
                    >
                  </p>
                  <p>
                    General Inquiries:
                    <a href="mailto:birukedjn@gmail.com">
                      Birukedjn@gmail.com</a
                    >
                  </p>
                </div>

                <div class="alert alert-info mt-auto mb-0">
                  <i class="bi bi-clock-history me-2"></i>
                  <strong>Response Time:</strong> We aim to respond to all
                  support tickets within 24 hours during school days.
                </div>
                <div class="alert alert-warning mt-3 mb-0">
                  <i class="bi bi-exclamation-triangle me-2"></i>
                  <strong>Note:</strong> Please check your email for updates
                  regarding your support requests.
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- FAQs Section -->
        <div class="row" id="faqs">
          <div class="col-lg-12">
            <div class="card shadow-sm">
              <div class="card-header bg-light">
                <h5 class="mb-0">
                  <i class="bi bi-question-circle me-2"></i>Frequently Asked
                  Questions
                </h5>
              </div>
              <div class="card-body">
                <div class="accordion" id="faqAccordion">
                  <!-- Technical FAQs -->
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="headingTechnical">
                      <button
                        class="accordion-button"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#collapseTechnical"
                        aria-expanded="true"
                        aria-controls="collapseTechnical"
                      >
                        Technical Issues
                      </button>
                    </h2>
                    <div
                      id="collapseTechnical"
                      class="accordion-collapse collapse show"
                      aria-labelledby="headingTechnical"
                      data-bs-parent="#faqAccordion"
                    >
                      <div class="accordion-body">
                        <div class="faq-item mb-3">
                          <h6>
                            Q: I can't log in to my account. What should I do?
                          </h6>
                          <p>
                            A: First try resetting your password using the
                            'Forgot Password' link. If that doesn't work,
                            contact IT support with your student ID.
                          </p>
                        </div>
                        <div class="faq-item mb-3">
                          <h6>
                            Q: The portal is loading very slowly. How can I fix
                            this?
                          </h6>
                          <p>
                            A: Try clearing your browser cache or using a
                            different browser. If the problem persists, it might
                            be a system issue - please report it.
                          </p>
                        </div>
                        <div class="faq-item">
                          <h6>
                            Q: I'm getting an error message when trying to
                            submit an assignment. What does this mean?
                          </h6>
                          <p>
                            A: Check the file size and format requirements. If
                            your file meets these but still won't upload, take a
                            screenshot of the error and submit a support ticket.
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Account FAQs -->
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="headingAccount">
                      <button
                        class="accordion-button collapsed"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#collapseAccount"
                        aria-expanded="false"
                        aria-controls="collapseAccount"
                      >
                        Account Help
                      </button>
                    </h2>
                    <div
                      id="collapseAccount"
                      class="accordion-collapse collapse"
                      aria-labelledby="headingAccount"
                      data-bs-parent="#faqAccordion"
                    >
                      <div class="accordion-body">
                        <div class="faq-item mb-3">
                          <h6>Q: How do I change my password?</h6>
                          <p>
                            A: Go to Settings > Security Settings. You'll need
                            to enter your current password before setting a new
                            one.
                          </p>
                        </div>
                        <div class="faq-item mb-3">
                          <h6>
                            Q: My personal information is incorrect. How can I
                            update it?
                          </h6>
                          <p>
                            A: Some information can be updated in your profile
                            settings. For official records (like name or ID),
                            please contact the registrar's office.
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Academic FAQs -->
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="headingAcademic">
                      <button
                        class="accordion-button collapsed"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#collapseAcademic"
                        aria-expanded="false"
                        aria-controls="collapseAcademic"
                      >
                        Academic Support
                      </button>
                    </h2>
                    <div
                      id="collapseAcademic"
                      class="accordion-collapse collapse"
                      aria-labelledby="headingAcademic"
                      data-bs-parent="#faqAccordion"
                    >
                      <div class="accordion-body">
                        <div class="faq-item mb-3">
                          <h6>
                            Q: I can't see one of my courses in the portal. What
                            should I do?
                          </h6>
                          <p>
                            A: First check with your instructor to confirm
                            you're properly enrolled. If you are, submit a
                            support ticket with the course details.
                          </p>
                        </div>
                        <div class="faq-item mb-3">
                          <h6>
                            Q: How do I access course materials from previous
                            semesters?
                          </h6>
                          <p>
                            A: Archived courses can be accessed through the
                            'Previous Courses' option in the Courses section.
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Settings Section -->
      <div id="section-setting" class="dashboard-section d-none">
        <div class="row mb-4">
          <div class="col">
            <h3 class="mb-3">Account Settings</h3>
            <div class="divider"></div>
          </div>
        </div>

        <div class="row">
          <!-- Profile Settings -->
          <div class="col-md-6 mb-4">
            <div class="card shadow-sm">
              <div class="card-header bg-light">
                <h5 class="mb-0">
                  <i class="bi bi-person-gear me-2"></i>Profile Information
                </h5>
              </div>
              <div class="card-body">
                <form id="profileForm">
                  <div class="mb-3">
                    <label for="firstName" class="form-label">First Name</label>
                    <input
                      type="text"
                      class="form-control"
                      id="firstName"
                      value="{{ user.first_name }}"
                    />
                  </div>
                  <div class="mb-3">
                    <label for="lastName" class="form-label">Last Name</label>
                    <input
                      type="text"
                      class="form-control"
                      id="lastName"
                      value="{{ user.last_name }}"
                    />
                  </div>
                  <div class="mb-3">
                    <label for="email" class="form-label">Email Address</label>
                    <input
                      type="email"
                      class="form-control"
                      id="email"
                      value="{{ user.email }}"
                    />
                  </div>
                  <div class="mb-3">
                    <label for="phone" class="form-label">Phone Number</label>
                    <input
                      type="tel"
                      class="form-control"
                      id="phone"
                      value="{{ user.student.phone|default:'' }}"
                    />
                  </div>
                  <button type="submit" class="btn btn-primary">
                    Update Profile
                  </button>
                </form>
              </div>
            </div>
          </div>

          <!-- Security Settings -->
          <div class="col-md-6 mb-4">
            <div class="card shadow-sm">
              <div class="card-header bg-light">
                <h5 class="mb-0">
                  <i class="bi bi-shield-lock me-2"></i>Security Settings
                </h5>
              </div>
              <div class="card-body">
                <form id="passwordForm">
                  <div class="mb-3">
                    <label for="email" class="form-label">Email Address</label>
                    <input type="email" class="form-control" id="email" />
                  </div>
                  <div class="mb-3">
                    <label for="currentPassword" class="form-label"
                      >Current Password</label
                    >
                    <input
                      type="password"
                      class="form-control"
                      id="currentPassword"
                    />
                  </div>
                  <div class="mb-3">
                    <label for="newPassword" class="form-label"
                      >New Password</label
                    >
                    <input
                      type="password"
                      class="form-control"
                      id="newPassword"
                    />
                  </div>
                  <div class="mb-3">
                    <label for="confirmPassword" class="form-label"
                      >Confirm New Password</label
                    >
                    <input
                      type="password"
                      class="form-control"
                      id="confirmPassword"
                    />
                  </div>
                  <button type="submit" class="btn btn-primary">
                    Change Password
                  </button>
                </form>
              </div>
            </div>
          </div>
        </div>

        <!-- Notification Preferences -->
        <div class="row">
          <div class="col-md-6 mb-4">
            <div class="card shadow-sm">
              <div class="card-header bg-light">
                <h5 class="mb-0">
                  <i class="bi bi-bell me-2"></i>Notification Preferences
                </h5>
              </div>
              <div class="card-body">
                <form id="notificationForm">
                  <div class="form-check form-switch mb-3">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="emailNotifications"
                      checked
                    />
                    <label class="form-check-label" for="emailNotifications"
                      >Email Notifications</label
                    >
                  </div>
                  <div class="form-check form-switch mb-3">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="smsNotifications"
                    />
                    <label class="form-check-label" for="smsNotifications"
                      >SMS Notifications</label
                    >
                  </div>
                  <div class="form-check form-switch mb-3">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="assignmentAlerts"
                      checked
                    />
                    <label class="form-check-label" for="assignmentAlerts"
                      >Assignment Alerts</label
                    >
                  </div>
                  <div class="form-check form-switch mb-3">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="gradeAlerts"
                      checked
                    />
                    <label class="form-check-label" for="gradeAlerts"
                      >Grade Updates</label
                    >
                  </div>
                  <div class="form-check form-switch mb-3">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="eventReminders"
                      checked
                    />
                    <label class="form-check-label" for="eventReminders"
                      >Event Reminders</label
                    >
                  </div>
                  <div class="form-check form-switch mb-3">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="classReminders"
                      checked
                    />
                    <label class="form-check-label" for="classReminders"
                      >Class Reminders</label
                    >
                  </div>
                  <button type="submit" class="btn btn-primary">
                    Save Preferences
                  </button>
                </form>
              </div>
            </div>
          </div>

          <!-- Account Preferences -->
          <div class="col-md-6 mb-4">
            <div class="card shadow-sm">
              <div class="card-header bg-light">
                <h5 class="mb-0">
                  <i class="bi bi-gear me-2"></i>Account Preferences
                </h5>
              </div>
              <div class="card-body">
                <form id="preferencesForm">
                  <div class="mb-3">
                    <label for="language" class="form-label">Language</label>
                    <select class="form-select" id="language">
                      <option value="en" selected>English</option>
                      <option value="am">Amharic</option>
                      <option value="om">Oromifa</option>
                    </select>
                  </div>
                  <div class="mb-3">
                    <label for="theme" class="form-label">Theme</label>
                    <select class="form-select" id="theme">
                      <option value="light" selected>Light</option>
                      <option value="dark">Dark</option>
                      <option value="system">System Default</option>
                    </select>
                  </div>
                  <div class="mb-3">
                    <label for="timezone" class="form-label">Timezone</label>
                    <select class="form-select" id="timezone">
                      <option value="Africa/Addis_Ababa" selected>
                        Addis Ababa (EAT)
                      </option>
                      <option value="UTC">UTC</option>
                    </select>
                  </div>
                  <button type="submit" class="btn btn-primary">
                    Save Preferences
                  </button>
                </form>
              </div>
            </div>
          </div>
        </div>

        <!-- Danger Zone -->
        <div class="row">
          <div class="col-12">
            <div class="card border-danger shadow-sm">
              <div class="card-header bg-danger text-white">
                <h5 class="mb-0">
                  <i class="bi bi-exclamation-triangle me-2"></i>Danger Zone
                </h5>
              </div>
              <div class="card-body">
                <div
                  class="d-flex justify-content-between align-items-center mb-3"
                >
                  <div>
                    <h6 class="mb-1">Deactivate Account</h6>
                    <p class="small mb-0">
                      Temporarily disable your account. You can reactivate it
                      later by logging in.
                    </p>
                  </div>
                  <button
                    class="btn btn-secondary px-2"
                    data-bs-toggle="modal"
                    data-bs-target="#deactivateModal"
                  >
                    Deactivate Account
                  </button>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                  <div>
                    <h6 class="mb-1">Delete Account</h6>
                    <p class="small mb-0">
                      Permanently delete your account and all associated data.
                      This cannot be undone.
                    </p>
                  </div>
                  <button
                    class="btn btn-danger px-4"
                    data-bs-toggle="modal"
                    data-bs-target="#deleteModal"
                  >
                    Delete Account
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Deactivate Account Modal -->
      <div
        class="modal fade"
        id="deactivateModal"
        tabindex="-1"
        aria-labelledby="deactivateModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header bg-warning text-dark">
              <h5 class="modal-title" id="deactivateModalLabel">
                Deactivate Account
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <p>
                Are you sure you want to deactivate your account? You will be
                logged out immediately.
              </p>
              <p class="mb-0">
                To reactivate your account, simply log in again.
              </p>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Cancel
              </button>
              <button
                type="button"
                class="btn btn-warning"
                id="confirmDeactivate"
              >
                Deactivate Account
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Delete Account Modal -->
      <div
        class="modal fade"
        id="deleteModal"
        tabindex="-1"
        aria-labelledby="deleteModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header bg-danger text-white">
              <h5 class="modal-title" id="deleteModalLabel">Delete Account</h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <p class="text-danger">
                <strong>Warning: This action is permanent!</strong>
              </p>
              <p>
                All your data including grades, assignments, and profile
                information will be permanently deleted.
              </p>
              <p>Are you absolutely sure you want to proceed?</p>
              <div class="mb-3">
                <label for="deletePassword" class="form-label"
                  >Enter your password to confirm:</label
                >
                <input
                  type="password"
                  class="form-control"
                  id="deletePassword"
                />
              </div>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Cancel
              </button>
              <button type="button" class="btn btn-danger" id="confirmDelete">
                Delete Account Permanently
              </button>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>
<!-- Optionally include Bootstrap Icons for sidebar icons -->
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
/>


{% endblock %} {% endif %}
