{% extends "base.html" %} {% load static %} {% if not user.is_authenticated %}
{% url 'login' as login %}
<script>
  window.location.href = "{{ login }}?next={{ request.path|urlencode }}";
</script>
{% else %} {% block title %}Attendance - WachemoSaPS{% endblock %} 
{% block content %}

<div class="max-w-7xl mx-auto px-4 py-6 grid grid-cols-1 md:grid-cols-[16rem_1fr] gap-6">
  {% include "student/sidebar.html" %}
  <main>
    <div id="section-attendance" class="space-y-6">
      <div>
        <h3 class="text-2xl font-semibold">Attendance Records</h3>
        <p class="text-gray-600">View your attendance history and statistics</p>
      </div>

      <!-- Summary -->
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        <div class="bg-green-600 text-white rounded p-4 text-center">
          <div class="text-2xl mb-1"><i class="fas fa-check-circle"></i></div>
          <h5 class="font-semibold">Present</h5>
          <h3 class="text-2xl font-bold">87%</h3>
          <small>This Semester</small>
        </div>
        <div class="bg-red-600 text-white rounded p-4 text-center">
          <div class="text-2xl mb-1"><i class="fas fa-times-circle"></i></div>
          <h5 class="font-semibold">Absent</h5>
          <h3 class="text-2xl font-bold">8%</h3>
          <small>This Semester</small>
        </div>
        <div class="bg-yellow-500 text-white rounded p-4 text-center">
          <div class="text-2xl mb-1"><i class="fas fa-clock"></i></div>
          <h5 class="font-semibold">Late</h5>
          <h3 class="text-2xl font-bold">5%</h3>
          <small>This Semester</small>
        </div>
        <div class="bg-cyan-600 text-white rounded p-4 text-center">
          <div class="text-2xl mb-1"><i class="fas fa-calendar-check"></i></div>
          <h5 class="font-semibold">Total Days</h5>
          <h3 class="text-2xl font-bold">64</h3>
          <small>This Semester</small>
        </div>
      </div>

      <!-- Filters -->
      <div class="border rounded p-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <div>
            <label for="attendanceMonth" class="block text-sm font-medium">Month</label>
            <select class="mt-1 w-full border rounded px-3 py-2" id="attendanceMonth">
              <option value="">All Months</option>
              <option value="1">January</option>
              <option value="2">February</option>
              <option value="3">March</option>
              <option value="4">April</option>
              <option value="5">May</option>
              <option value="6" selected>June</option>
              <option value="7">July</option>
              <option value="8">August</option>
              <option value="9">September</option>
              <option value="10">October</option>
              <option value="11">November</option>
              <option value="12">December</option>
            </select>
          </div>
          <div>
            <label for="attendanceSubject" class="block text-sm font-medium">Subject</label>
            <select class="mt-1 w-full border rounded px-3 py-2" id="attendanceSubject">
              <option value="">All Subjects</option>
              <option value="math">Mathematics</option>
              <option value="science">Science</option>
              <option value="english">English</option>
              <option value="history">History</option>
            </select>
          </div>
          <div>
            <label for="attendanceStatus" class="block text-sm font-medium">Status</label>
            <select class="mt-1 w-full border rounded px-3 py-2" id="attendanceStatus">
              <option value="">All Statuses</option>
              <option value="present">Present</option>
              <option value="absent">Absent</option>
              <option value="late">Late</option>
              <option value="excused">Excused</option>
            </select>
          </div>
          <div class="flex items-end">
            <button class="w-full bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded" id="applyFilters">
              <i class="fas fa-filter mr-2"></i>Apply Filters
            </button>
          </div>
        </div>
      </div>

      <!-- Calendar Table -->
      <div class="border rounded">
        <div class="flex items-center justify-between px-4 py-2 bg-gray-50 border-b">
          <h5 class="font-semibold"><i class="fas fa-calendar-alt mr-2"></i>Monthly Overview</h5>
          <div class="space-x-2">
            <button class="px-3 py-1 border rounded" id="prevMonthAtt">‹</button>
            <button class="px-3 py-1 border rounded" id="nextMonthAtt">›</button>
          </div>
        </div>
        <div class="overflow-x-auto">
          <table class="min-w-full text-sm">
            <thead>
            <tr>
                <th class="text-center px-2 py-2">Sun</th>
                <th class="text-center px-2 py-2">Mon</th>
                <th class="text-center px-2 py-2">Tue</th>
                <th class="text-center px-2 py-2">Wed</th>
                <th class="text-center px-2 py-2">Thu</th>
                <th class="text-center px-2 py-2">Fri</th>
                <th class="text-center px-2 py-2">Sat</th>
              </tr>
            </thead>
            <tbody id="attendance-calendar-body"></tbody>
          </table>
        </div>
        <div class="px-4 py-3">
          <div class="flex flex-wrap gap-4 text-sm">
            <div class="flex items-center gap-2"><span class="w-3 h-3 bg-green-500 inline-block"></span><small>Present</small></div>
            <div class="flex items-center gap-2"><span class="w-3 h-3 bg-red-500 inline-block"></span><small>Absent</small></div>
            <div class="flex items-center gap-2"><span class="w-3 h-3 bg-yellow-400 inline-block"></span><small>Late</small></div>
            <div class="flex items-center gap-2"><span class="w-3 h-3 bg-cyan-400 inline-block"></span><small>Excused</small></div>
            <div class="flex items-center gap-2"><span class="w-3 h-3 bg-gray-400 inline-block"></span><small>Holiday</small></div>
            <div class="flex items-center gap-2"><span class="w-3 h-3 bg-gray-200 inline-block border"></span><small>Weekend</small></div>
          </div>
        </div>
      </div>

      <!-- Detailed Records -->
      <div class="border rounded">
        <div class="px-4 py-2 bg-gray-50 border-b">
          <h5 class="font-semibold"><i class="fas fa-list-check mr-2"></i>Detailed Records</h5>
        </div>
        <div class="overflow-x-auto">
          <table class="min-w-full text-sm">
            <thead class="bg-gray-50">
              <tr>
                <th class="text-left px-4 py-2">Date</th>
                <th class="text-left px-4 py-2">Day</th>
                <th class="text-left px-4 py-2">Subject</th>
                <th class="text-left px-4 py-2">Status</th>
                <th class="text-left px-4 py-2">Time</th>
                <th class="text-left px-4 py-2">Remarks</th>
              </tr>
            </thead>
            <tbody>
              <tr class="border-t">
                <td class="px-4 py-2">2025-06-15</td>
                <td class="px-4 py-2">Monday</td>
                <td class="px-4 py-2">Mathematics</td>
                <td class="px-4 py-2"><span class="inline-flex items-center px-2 py-0.5 rounded text-xs bg-green-100 text-green-700">Present</span></td>
                <td class="px-4 py-2">08:15 AM</td>
                <td class="px-4 py-2">-</td>
              </tr>
              <tr class="border-t">
                <td class="px-4 py-2">2025-06-16</td>
                <td class="px-4 py-2">Tuesday</td>
                <td class="px-4 py-2">Science</td>
                <td class="px-4 py-2"><span class="inline-flex items-center px-2 py-0.5 rounded text-xs bg-red-100 text-red-700">Absent</span></td>
                <td class="px-4 py-2">-</td>
                <td class="px-4 py-2">Medical Leave</td>
              </tr>
              <tr class="border-t">
                <td class="px-4 py-2">2025-06-17</td>
                <td class="px-4 py-2">Wednesday</td>
                <td class="px-4 py-2">English</td>
                <td class="px-4 py-2"><span class="inline-flex items-center px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-800">Late</span></td>
                <td class="px-4 py-2">09:05 AM</td>
                <td class="px-4 py-2">Traffic delay</td>
              </tr>
              <tr class="border-t">
                <td class="px-4 py-2">2025-06-18</td>
                <td class="px-4 py-2">Thursday</td>
                <td class="px-4 py-2">History</td>
                <td class="px-4 py-2"><span class="inline-flex items-center px-2 py-0.5 rounded text-xs bg-green-100 text-green-700">Present</span></td>
                <td class="px-4 py-2">08:10 AM</td>
                <td class="px-4 py-2">-</td>
              </tr>
              <tr class="border-t">
                <td class="px-4 py-2">2025-06-19</td>
                <td class="px-4 py-2">Friday</td>
                <td class="px-4 py-2">Mathematics</td>
                <td class="px-4 py-2"><span class="inline-flex items-center px-2 py-0.5 rounded text-xs bg-cyan-100 text-cyan-800">Excused</span></td>
                <td class="px-4 py-2">-</td>
                <td class="px-4 py-2">Family event</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="px-4 py-3 border-t">
          <div class="flex items-center justify-center gap-2 text-sm">
            <button class="px-3 py-1 border rounded text-gray-600 opacity-50 cursor-not-allowed">Previous</button>
            <button class="px-3 py-1 border rounded bg-blue-600 text-white">1</button>
            <button class="px-3 py-1 border rounded">2</button>
            <button class="px-3 py-1 border rounded">3</button>
            <button class="px-3 py-1 border rounded">Next</button>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>

{% endblock %} {% endif %}




